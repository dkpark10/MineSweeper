(this.webpackJsonpminesweeper2=this.webpackJsonpminesweeper2||[]).push([[7],{316:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(59);var i=n(90);function c(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(i.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},317:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(339);function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Object(r.a)(e,t)}},318:function(e,t,n){"use strict";function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}n.d(t,"a",(function(){return r}))},324:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(318),i=n(346);function c(e){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}var o=n(347);function a(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?Object(o.a)(e):t}function u(e){var t=Object(i.a)();return function(){var n,i=Object(r.a)(e);if(t){var c=Object(r.a)(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return a(this,n)}}},339:function(e,t,n){"use strict";function r(e,t){return r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(e,t)}n.d(t,"a",(function(){return r}))},346:function(e,t,n){"use strict";function r(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}n.d(t,"a",(function(){return r}))},347:function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",(function(){return r}))},429:function(e,t,n){},492:function(e,t,n){},493:function(e,t,n){},745:function(e,t,n){"use strict";n.r(t);var r,i=n(0),c=n(84),o=n(88),a=(n(492),n(21)),u=n(92),l=n(33),s=n(1),f=function(e){var t=e.levelInfo,n=Object(a.b)(),r=Object(a.c)((function(e){return{extraCell:e.game.isGameOver,takenTime:e.game.takenTime,userId:e.login.id}})),c=r.extraCell,o=r.takenTime,f=r.userId,b=0===c;Object(i.useEffect)((function(){return-1!==o&&f&&""!==f&&(console.log(b),l.a.post("/api/auth/game",{id:f,record:o/1e3,success:b,level:t}).then((function(e){}))),n(Object(u.b)(!1)),function(){return localStorage.setItem("difficulty",t)}}),[b,o,f,n,t]);return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("div",{className:c<=0?"modal":"modal hidden",children:[Object(s.jsx)("div",{className:"modal-overlay"}),Object(s.jsxs)("div",{className:"modal-content",children:[Object(s.jsxs)("div",{children:[" Time : ",o/1e3]}),Object(s.jsxs)("div",{children:[" Level : ",t]}),Object(s.jsx)("button",{className:"closemodal",onClick:function(){n(Object(u.b)(!0)),n(Object(u.d)(-1))},children:"Close"})]})]})})},b=n(316),d=n(17),h=n(26),v=(n(429),function(e,t){return Array.from({length:e},(function(){return Array})).map((function(){return Array.from({length:t},(function(){return{mine:!1,neighbor:0,visited:!1,flaged:!1,visible:" "}}))}))}),j=function(e,t){for(var n=e.length,r=e[0].length,i=t;i;){var c=window.crypto.getRandomValues(new Uint8Array(1))[0]%n,o=window.crypto.getRandomValues(new Uint8Array(1))[0]%r;!1===e[c][o].mine&&(e[c][o].mine=!0,i--)}},m=function(e,t,n,r){for(var i=r.row,c=r.col,o=0,a=e-1;a<=e+1;a++)for(var u=t-1;u<=t+1;u++)O(a,u,i,c)||e===a&&t===u||!0===n[a][u].mine&&o++;return o},O=function(e,t,n,r){return e<0||t<0||e>=n||t>=r},g=(n(493),function(e){return e<10?"00".concat(e):e>=10&&e<100?"0".concat(e):String(e)}),p=function(e){var t=e.firstClick,n=e.numofFlag,r=e.isGameOver,c=Object(a.b)(),o=Object(i.useState)(0),l=Object(d.a)(o,2),f=l[0],b=l[1],h=Object(i.useRef)(null),v=Object(i.useRef)(null);return Object(i.useEffect)((function(){return v.current=(new Date).getTime(),h.current=setInterval((function(){!1===t&&b((function(e){return e+1}))}),1e3),function(){return clearInterval(h.current)}}),[t]),Object(i.useEffect)((function(){if(r){var e=(new Date).getTime();c(Object(u.d)(e-v.current)),v.current=null,b((function(e){return 0}))}clearInterval(h.current),h.current=null}),[r,c]),Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("div",{className:"gameinfo",children:[Object(s.jsxs)("span",{children:[" \u23f3",Object(s.jsxs)("label",{children:[" ",g(f)]})]}),Object(s.jsx)("span",{className:"heart",children:"\ud83d\udc97"}),Object(s.jsxs)("span",{children:[" \ud83d\udea9",Object(s.jsxs)("label",{children:[" ",n," "]})]})]})})},y=n(87),x=n(89),C=n(317),w=n(324),k=[0,0,1,-1,-1,-1,1,1],E=[1,-1,0,0,-1,1,-1,1],S=function(){function e(t,n,r){Object(y.a)(this,e),this.cellData=void 0,this.coord=void 0,this.boardSize=void 0,this.cellData=t,this.coord=n,this.boardSize=r}return Object(x.a)(e,[{key:"getCellData",value:function(){return this.cellData}},{key:"checkOutRange",value:function(e,t){return e<0||t<0||e>=this.boardSize.row||t>=this.boardSize.col}},{key:"depthFirstSearch",value:function(e){var t=1,n=e.y,r=e.x,i=this.cellData;i[n][r].visited=!0,t+=this.setNeighborCell(e);for(var c=0;c<8;c++){var o=n+k[c],a=r+E[c];this.checkOutRange(o,a)||!1===i[o][a].visited&&i[o][a].neighbor<=0&&!1===i[o][a].flaged&&!1===i[o][a].mine&&(t+=this.depthFirstSearch({y:o,x:a}))}return t}},{key:"setNeighborCell",value:function(e){for(var t=0,n=e.y,r=e.x,i=this.cellData,c=n-1;c<=n+1;c++)for(var o=r-1;o<=r+1;o++)this.checkOutRange(c,o)||c===n&&o===r||!0!==i[c][o].visited&&i[c][o].neighbor>0&&!1===i[c][o].flaged&&(i[c][o].visible=i[c][o].neighbor,i[c][o].visited=!0,t++);return t}}]),e}(),D={render:!1,flag:!1,removeCell:-1},I={render:!0,flag:!1,removeCell:987654321},F=function(e){Object(C.a)(n,e);var t=Object(w.a)(n);function n(){return Object(y.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"process",value:function(){var e=this.coord,t=e.y,n=e.x,r=this.cellData;return!0===r[t][n].visited||!0===r[t][n].flaged?D:!0===r[t][n].mine?(r[t][n].visible="\ud83d\udca3",I):r[t][n].neighbor>0?(r[t][n].visible=r[t][n].neighbor,r[t][n].visited=!0,{render:!0,flag:!1,removeCell:1}):{render:!0,flag:!1,removeCell:this.depthFirstSearch({y:t,x:n})}}}]),n}(S),R=F,M={render:!1,flag:!1,removeCell:-1},L=function(e){Object(C.a)(n,e);var t=Object(w.a)(n);function n(){return Object(y.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"process",value:function(){var e=this.cellData,t=this.coord,n=t.y,r=t.x;if(!0===e[n][r].visited&&(e[n][r].neighbor>0||e[n][r].neighbor<=0))return M;var i=e[n][r].flaged;return i=!i,e[n][r].flaged=i,e[n][r].visible=!0===i?"\ud83d\udea9":" ",{render:!0,flag:!0,removeCell:0}}}]),n}(S),A=L,T={render:!1,flag:!1,removeCell:-1},N={render:!0,flag:!1,removeCell:987654321},K=function(e){Object(C.a)(n,e);var t=Object(w.a)(n);function n(){return Object(y.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"process",value:function(){var e=0,t=this.cellData,n=this.coord,r=n.y,i=n.x;if(t[r][i].neighbor<0||!0===t[r][i].flaged||!1===t[r][i].visited)return console.log("norender"),T;for(var c=0,o=0,a=r-1;a<=r+1;a++)for(var u=i-1;u<=i+1;u++)this.checkOutRange(a,u)||(!0===t[a][u].flaged&&o++,this.isFlagonMine(a,u)&&c++);if(o>t[r][i].neighbor)return N;if(o===t[r][i].neighbor&&c!==t[r][i].neighbor)return N;if(c!==t[r][i].neighbor)return T;for(var l=r-1;l<=r+1;l++)for(var s=i-1;s<=i+1;s++)this.checkOutRange(l,s)||!0!==t[l][s].flaged&&!0!==t[l][s].visited&&(t[l][s].neighbor>0?(t[l][s].visible=t[l][s].neighbor,t[l][s].visited=!0,e++):e+=this.depthFirstSearch({y:l,x:s}));return{render:!0,flag:!1,removeCell:e}}},{key:"isFlagonMine",value:function(e,t){return!0===this.cellData[e][t].flaged&&!0===this.cellData[e][t].mine}}]),n}(S),G=K;!function(e){e[e.LEFTCLICK=0]="LEFTCLICK",e[e.WHEELCLICK=1]="WHEELCLICK",e[e.RIGHTCLCK=2]="RIGHTCLCK"}(r||(r={}));var _,H=function(e,t,n,i){switch(e){case r.LEFTCLICK:return new R(t,n,i);case r.RIGHTCLCK:return new A(t,n);case r.WHEELCLICK:return new G(t,n,i)}},W=["","#FF245E","#8CA9FA","#FFAA39","#7EEE62","#D9D1E8","#0DEBEB","#A566F8","#A9350B"],P=function(e){var t=e.value,n=e.islock,r=e.onMouseDown,i=e.onContextMenu,c=W[t];return Object(s.jsx)("div",{className:n?"lock":"cell",onMouseDown:r,onContextMenu:i,children:Object(s.jsx)("div",{className:"cell-text",style:{color:"".concat(c)},children:t})})},z=n(20).b.div(_||(_=Object(h.a)(["\n  background-color: #2e2d2d;\n  border-radius: 5px;\n  padding:20px;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  position: absolute;\n  border:2px solid var(--main-theme-color);\n  min-width: ",";\n"])),(function(e){return e.minWidth})),B=function(e){var t=e.levelInfo,n=e.minWidth,r=Object(a.b)(),c=Object(i.useState)(v(t.row,t.col)),o=Object(d.a)(c,2),l=o[0],f=o[1],h=Object(i.useState)(!0),O=Object(d.a)(h,2),g=O[0],y=O[1],x=Object(i.useState)(t.numberOfMine),C=Object(d.a)(x,2),w=C[0],k=C[1],E=Object(a.c)((function(e){return{extraCell:e.game.isGameOver,gameRestart:e.game.gameRestart}})),S=E.extraCell,D=E.gameRestart;Object(i.useEffect)((function(){var e=t.row,n=t.col,i=t.numberOfMine,c=v(e,n);j(c,i),function(e,t){for(var n=t.row,r=t.col,i=0;i<n;i++)for(var c=0;c<r;c++)e[i][c].neighbor=m(i,c,e,t)}(c,{row:e,col:n,numberOfMine:i}),f(c),k(i),y(!0),r(Object(u.c)(e*n-i))}),[D,t,r]);var I=function(e,t,n,r){var i=r.y,c=r.x;!0===g&&0===t&&(y(!1),!0===n[i][c].mine&&(n[i][c].mine=!1,j(n,1),f(n)))},F=l.map((function(e,n){return Object(s.jsx)("div",{className:"game-container-row",children:e.map((function(i,c){return Object(s.jsx)(P,{value:i.mine&&S<=0?"\ud83d\udca3":i.visible,islock:i.visited,onMouseDown:function(e){return function(e,n){var i=n.y,c=n.x;e.preventDefault();var o=Object(b.a)(l);I(g,e.button,o,{y:i,x:c});var a=t.row,s=t.col,d=H(e.button,o,{y:i,x:c},{row:a,col:s}),h=d.process();!0===h.render&&(!0===h.flag&&(!0===d.getCellData()[i][c].flaged?k((function(e){return e-1})):k((function(e){return e+1}))),r(Object(u.c)(S-h.removeCell)),f(o)),d=null}(e,{y:n,x:c})},onContextMenu:function(e){return e.preventDefault()}},n*e.length+c)}))},n)}));return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)(z,{minWidth:n,children:[Object(s.jsx)(p,{firstClick:g,numofFlag:w,isGameOver:S<=0}),F]})})};t.default=function(){var e=c.a[localStorage.getItem("difficulty")]||c.a.Easy,t=Object(i.useMemo)((function(){return 10===e.row&&10===e.col&&10===e.numberOfMine?"Easy":16===e.row&&16===e.col&&40===e.numberOfMine?"Normal":"Hard"}),[e]),n=Object(i.useMemo)((function(){return 10===e.row&&10===e.col&&10===e.numberOfMine?"294px":16===e.row&&16===e.col&&40===e.numberOfMine?"444px":"794px"}),[e]);return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(f,{levelInfo:t}),Object(s.jsx)(o.a,{selected:"Game"}),Object(s.jsx)(B,{levelInfo:e,minWidth:n})]})}}}]);
//# sourceMappingURL=7.958ed4cd.chunk.js.map